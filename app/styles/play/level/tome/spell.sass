@import "app/styles/mixins"
@import "app/styles/bootstrap/variables"
@import "app/styles/play/variables"

@mixin editor-height($extraHeight)
  width: 98%
  height: 83%
  height: unquote("-webkit-calc(100% - 100px -")$extraHeight unquote(")")
  height: unquote("calc(100% - 100px -")$extraHeight unquote(")")

#spell-view
  margin-top: calc(26vw - 48px)
  padding-top: 2vw
  padding-left: 30px
  padding-bottom: 75px
  display: none
  position: relative
  z-index: 1
  left: 8%
  padding-right: 14%

  &.shown
    display: block

  .code-background
    position: absolute
    top: calc(-5.4vw + 48px)
    bottom: 1.4vw
    left: 0px
    right: 15%
    border: 1px solid transparent

  span.code-background
    border-width: 4vw 2.64vw 2.23vw 1.39vw
    border-image: url(/images/level/little-sophia/code_editor_background_border.png) 115 76 64 40 fill stretch

  img.code-background
    display: none
    width: 100%

  .save-status
    display: none
    position: absolute
    top: calc(-1.7vw + 48px)
    right: 19%
    text-align: right
    z-index: 4
    font-family: $ls-font
    color: #e7e7e7
    font-size: 1.1vw

  .code-input-label
    position: absolute
    left: 2.4vw
    top: calc(-3.8vw + 48px)
    z-index: 4
    font-family: $ls-font
    text-transform: uppercase
    color: #e7e7e7
    font-size: 1.5vw

  .programming-language-container
    position: absolute
    top: calc(-2.7vw + 48px)
    right: 19%
    z-index: 4
    font-family: $ls-font
    font-size: 1.1vw

    .programming-language-label
      color: #e7e7e7
      font-weight: bold
      text-transform: uppercase
    .programming-language
      color: #ff8528

  .firepad
    // When Firepad is active, it wraps .ace_editor in .firepad.
    @include editor-height(0px)
    width: 94%

    .ace_editor
      width: 100%
      height: 100%

    .powered-by-firepad
      display: none

  .ace_editor
    // When Firepad isn't active, .ace_editor needs the width/height set itself.
    @include editor-height(0px)
    margin-top: 10px
    width: 94%
    position: relative
    background-color: transparent
    line-height: 20px
    overflow: visible
    // https://github.com/codecombat/codecombat/issues/1411#issuecomment-60492750 -- trying to make sure system defaults don't mess up our monospace font.
    font-family: Monaco, Menlo, Ubuntu Mono, Consolas, "source-code-pro", monospace !important
    @include transition(height 0.25s ease-in-out)

    body[lang="he"] &, body[lang="ar"] &, body[lang="fa"] &, body[lang="ur"] &
      font-family: "Cousine", "Courier", "Courier New", monospace !important

    &.disabled
      @include opacity(0.8)
      .ace_cursor, .executing, .ace_active-line, .ace_gutter-active-line
        @include opacity(0.1)

    .ace_gutter
      background-color: transparent
      //border-right: 1px solid rgb(195, 178, 156)
      //background-color: rgba(255, 255, 255, 0.25)
      width: 47px
      margin-left: 4px
      color: #e7e7e7
      
    // override ace visible to get the experimental large current line executing arrow visible
    .ace_gutter
      overflow: visible
      
    .ace_layer
      overflow: visible
    // End experiment....

    .ace_cursor
      color: #e7e7e7

    .ace_scroller
      background-color: transparent
      //padding-left: 10px  // Interrupts gutter and line highlighting

    .ace_active-line, .ace_gutter-active-line
      background-color: rgba(128, 32, 32, 0.4)

    .ace_active-line
      margin-left: 4px

    .ace_content
      .executing, .executed, .problem-marker-info, .problem-marker-warning, .problem-marker-error, .problem-line
        position: absolute
    .executing
      // https://github.com/codecombat/codecombat/issues/6
      background-color: rgba(128, 32, 32, 0.75)
      @include gradient-striped()
      outline: 2px outset #0099ff
      @include box-shadow(1px 1px 4px black)
      opacity: 0.3
    &.playback-ended .executing, &.user-code-problem .executing
      background-color: rgba(50, 255, 80, 0.05)
      outline: 0
      @include box-shadow(0 0 0px black)
    .executed
      background-color: rgba(90, 26, 26, 0.12)

    +keyframes(pulseRedBackground)
      from
        background-color: rgba(255, 45, 27, 0.4)
      50%
        background-color: rgba(255, 45, 27, 0.2)
      to
        background-color: rgba(255, 45, 27, 0.4)

    // problem-marker-#{@aetherProblem.level} set in Problem.coffee
    .problem-marker-info
      background-color: rgba(196, 163, 184, 0.25)
    .problem-marker-warning
      background-color: rgba(100, 65, 20, 0.25)
    .problem-marker-error
      background-color: rgba(255, 45, 27, 0.5)
    .problem-line
      // TODO: Pulses too quickly during playback
      @include animation(pulseRedBackground 1s infinite)

    &:not(.playback-ended):not(.user-code-problem)
      .executing:not(.ace_gutter-cell)
        background-size: 40px 40px
        @include animation(progress-bar-stripes 0.5s linear infinite)

    &:not(.user-code-problem)
      .ace_gutter-cell.executing:not(.ace_error):not(.ace_warning):not(.ace_info)
        margin-left: 1px
        background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUBAMAAAB/pwA+AAAAAXNSR0IArs4c6QAAAHxlWElmTU0AKgAAAAgAAwESAAMAAAABAAEAAAExAAIAAAAgAAAAModpAAQAAAABAAAAUgAAAABBZG9iZSBQaG90b3Nob3AgQ1M1LjEgTWFjaW50b3NoAAADoAEAAwAAAAEAAQAAoAIABAAAAAEAAAAUoAMABAAAAAEAAAAUAAAAABNjVe8AAAR6aVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJYTVAgQ29yZSA2LjAuMCI+CiAgIDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+CiAgICAgIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICAgICAgICAgIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIKICAgICAgICAgICAgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iCiAgICAgICAgICAgIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIgogICAgICAgICAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyI+CiAgICAgICAgIDx4bXA6Q3JlYXRvclRvb2w+QWRvYmUgUGhvdG9zaG9wIENTNS4xIE1hY2ludG9zaDwveG1wOkNyZWF0b3JUb29sPgogICAgICAgICA8eG1wTU06RGVyaXZlZEZyb20gcmRmOnBhcnNlVHlwZT0iUmVzb3VyY2UiPgogICAgICAgICAgICA8c3RSZWY6aW5zdGFuY2VJRD54bXAuaWlkOkE1NTIxN0QyMzEyMDY4MTE4REJCODU5QTI0NUExMDk1PC9zdFJlZjppbnN0YW5jZUlEPgogICAgICAgICAgICA8c3RSZWY6ZG9jdW1lbnRJRD54bXAuZGlkOjAyODAxMTc0MDcyMDY4MTE4QTZERThDQzUxMzUyQjFGPC9zdFJlZjpkb2N1bWVudElEPgogICAgICAgICA8L3htcE1NOkRlcml2ZWRGcm9tPgogICAgICAgICA8eG1wTU06RG9jdW1lbnRJRD54bXAuZGlkOkFCNURBQ0MzNDhFQjExRTE4RUZFRTI3MUQ0MzdENUUwPC94bXBNTTpEb2N1bWVudElEPgogICAgICAgICA8eG1wTU06SW5zdGFuY2VJRD54bXAuaWlkOkFCNURBQ0MyNDhFQjExRTE4RUZFRTI3MUQ0MzdENUUwPC94bXBNTTpJbnN0YW5jZUlEPgogICAgICAgICA8eG1wTU06T3JpZ2luYWxEb2N1bWVudElEPnhtcC5kaWQ6MDI4MDExNzQwNzIwNjgxMThBNkRFOENDNTEzNTJCMUY8L3htcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD4KICAgICAgICAgPHRpZmY6T3JpZW50YXRpb24+MTwvdGlmZjpPcmllbnRhdGlvbj4KICAgICAgPC9yZGY6RGVzY3JpcHRpb24+CiAgIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+CkIgq20AAAAnUExURQAAADBAgDhAgDVAgDNDgzRCgTRCgjRCgjRDgjRDgTVCgTRCgjRCgvCrygQAAAAMdFJOUwAQIDBQgI+vv8/f7xldAZkAAAAvSURBVAjXY2AgCfA0I5hnEhHMUw5w5pnjCnDmma0I5pkJ2JhbsWhDMiwRi8VEAwBWSxpNylWe+QAAAABJRU5ErkJggg==")
        background-position: 0px center
        //opacity: 1

    .ace_gutter-cell.executed:not(.ace_error):not(.ace_warning):not(.ace_info)
      margin-left: 1px
      background-image: url("data:image/png;base64,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AAIAAIdpAAQAAAABAAAAWgAAAAAAAACQAAAAAQAAAJAAAAABAAOShgAHAAAAEgAAAISgAgAEAAAAAQAAABSgAwAEAAAAAQAAABQAAAAAQVNDSUkAAABTY3JlZW5zaG90rRcwxAAAAAlwSFlzAAAWJQAAFiUBSVIk8AAAAtdpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IlhNUCBDb3JlIDYuMC4wIj4KICAgPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICAgICAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIKICAgICAgICAgICAgeG1sbnM6ZXhpZj0iaHR0cDovL25zLmFkb2JlLmNvbS9leGlmLzEuMC8iCiAgICAgICAgICAgIHhtbG5zOnRpZmY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vdGlmZi8xLjAvIj4KICAgICAgICAgPGV4aWY6UGl4ZWxYRGltZW5zaW9uPjEyODwvZXhpZjpQaXhlbFhEaW1lbnNpb24+CiAgICAgICAgIDxleGlmOlVzZXJDb21tZW50PlNjcmVlbnNob3Q8L2V4aWY6VXNlckNvbW1lbnQ+CiAgICAgICAgIDxleGlmOlBpeGVsWURpbWVuc2lvbj4xMjg8L2V4aWY6UGl4ZWxZRGltZW5zaW9uPgogICAgICAgICA8dGlmZjpSZXNvbHV0aW9uVW5pdD4yPC90aWZmOlJlc29sdXRpb25Vbml0PgogICAgICAgICA8dGlmZjpZUmVzb2x1dGlvbj4xNDQ8L3RpZmY6WVJlc29sdXRpb24+CiAgICAgICAgIDx0aWZmOlhSZXNvbHV0aW9uPjE0NDwvdGlmZjpYUmVzb2x1dGlvbj4KICAgICAgICAgPHRpZmY6T3JpZW50YXRpb24+MTwvdGlmZjpPcmllbnRhdGlvbj4KICAgICAgPC9yZGY6RGVzY3JpcHRpb24+CiAgIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+Cg03sF4AAADJUExURQAAAAAAAAAA/////4CAgBUVKx8pRxgkNQwRIxMYGBMYJhgiMBMYHBMYJhMXHBIXIBkhMhQYHBQcIBQYIBohNBshNBskMRghLhgjNBshKRshLh0nOSQzVB4rQB0pPR8nPR0pPyAuRyo7YCk7YCw+Zys9Ziw9ZzFDcis+Zis+Zys9ZSs9ZSw/Zy4/aC9DcDFGdDBFcjJHdjJIdjJIdzJGdTJGdjJHdzBDcTBEcTBFcjdOgztUkDtVjztVkDtWkDxUjzxVkDxWkTxWkgAqMogAAAA7dFJOUwABAQECDBkrLDU1NTY2Nzg9Pz9ATlRdXl5eXmJkcHF1gqjQ0dPV3Nzf3+Dh5Ovz8/X19vb39/f4+Pj75epW2wAAAIJJREFUGBm1wVcOglAUQMFzQbF3xd4b9t5Fxf0vykSTF4Q/E2f4kQg+gp8uhTQeGsXt0OCLUJo7AwM3HXPtWCkUAY3K8TbOIbwFayECOs2N3Y0ifLTPvTCY++coidJaPfrx8uEyySAo1cV1trQ7CQRFaOycuxVBcBHqp2kWDyEf499eu2kJvG1QL6EAAAAASUVORK5CYII=")
      background-position: 0px center

    .ace_gutter-cell.entry-point:after
      content: " "
      display: block
      position: relative
      width: 40px
      top: -25px
      height: 38px
      overflow: visible

      background-image: url(/images/level/little-sophia/arrow.png)
      background-repeat: no-repeat
      background-size: contain

    .ace_gutter-cell.entry-point:not(.next-entry-point):after
      opacity: 0.5

    .ace_gutter-cell.entry-point.entry-point-indent-0:after
      left: -25px
    .ace_gutter-cell.entry-point.entry-point-indent-4:after
      left: 5px
    .ace_gutter-cell.entry-point.entry-point-indent-8:after
      left: 33px
    .ace_gutter-cell.entry-point.entry-point-indent-12:after
      left: 61px
    .ace_gutter-cell.entry-point.entry-point-indent-16:after
      left: 89px

    .ace_gutter-cell.ace_error
      background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEgAACxIB0t1+/AAAABx0RVh0U29mdHdhcmUAQWRvYmUgRmlyZXdvcmtzIENTM5jWRgMAAAAVdEVYdENyZWF0aW9uIFRpbWUAMi8xNy8wOCCcqlgAAAQRdEVYdFhNTDpjb20uYWRvYmUueG1wADw/eHBhY2tldCBiZWdpbj0iICAgIiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+Cjx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDQuMS1jMDM0IDQ2LjI3Mjk3NiwgU2F0IEphbiAyNyAyMDA3IDIyOjExOjQxICAgICAgICAiPgogICA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogICAgICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgICAgICAgICB4bWxuczp4YXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iPgogICAgICAgICA8eGFwOkNyZWF0b3JUb29sPkFkb2JlIEZpcmV3b3JrcyBDUzM8L3hhcDpDcmVhdG9yVG9vbD4KICAgICAgICAgPHhhcDpDcmVhdGVEYXRlPjIwMDgtMDItMTdUMDI6MzY6NDVaPC94YXA6Q3JlYXRlRGF0ZT4KICAgICAgICAgPHhhcDpNb2RpZnlEYXRlPjIwMDgtMDMtMjRUMTk6MDA6NDJaPC94YXA6TW9kaWZ5RGF0ZT4KICAgICAgPC9yZGY6RGVzY3JpcHRpb24+CiAgICAgIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICAgICAgICAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyI+CiAgICAgICAgIDxkYzpmb3JtYXQ+aW1hZ2UvcG5nPC9kYzpmb3JtYXQ+CiAgICAgIDwvcmRmOkRlc2NyaXB0aW9uPgogICA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDUdUmQAAAD5SURBVDiNpZMxagMxEEWfgiCXcB3IbXwD7zbaM0nNyjdIl1O4Dk7pbsslEFbEZFKsJsiJrGDy4YM0M//zRyAoINAJyB8cS43RwwIdMFrvaeE8DADxXqQ3Jstn6GaQ5L3M0GQxsyaZoJtA3r2XCS6o+FkvZkdOIG/eywl+UVHrqcYm4BNIjb1rPdXYBTivj3gVtZ5q/p8gAfPhcLOBamzKcW41UI1dgA/qez4bU6muUE0zwVYEgKeKkWruEnTHENg4R8pFZblCyY1zHEMgQTQAe9gB8cE5XkO4GhugmIk76L+z+Wzy6FzT4CWLXf5MF8upSdMB4gC9Xr4AiezTJHGxdq0AAAAASUVORK5CYII=)

    .ace_gutter, .ace_gutter-layer
      // Ace sets this to 'strict', which would not paint yellow gutter arrows outside the gutter; this keeps the other three performance-enhancing contain values
      //contain: size layout style

    .ace_marker-layer
      .ace_bracket
        // Override faint gray
        border-color: #00999e

      .locked-code
        border: 1px dashed rgba(53, 45, 34, 0.5)
        background-color: transparent
        @include transition(background-color 0.25s ease-in-out)

        &:after
          content: "Locked"
          opacity: 0
          display: block
          text-align: right
          @include transition(opacity 4s ease-in-out)
          font-size: 24px

        &.pulsating
          background-color: rgba(53, 45, 34, 0.5)

          &:after
            opacity: 1

    // Decided it wasn't useful to show what can be hovered, since almost anything can, so we have to make it too faint to be useful if we don't want it to be really distracting.
    //.ace_identifier
    //  border-bottom: 1px dotted rgba(0, 51, 255, 0.25)

    .ace_text-layer
      color: #e7e7e7

    .ace_text-layer .ace_identifier, .ace_text-layer .ace_punctuation
      color: #e7e7e7

    .ace_text-layer .ace_support
      color: #00999e

    .ace_text-layer .ace_string
      color: #ff8528

    .ace_text-layer .ace_comment
      color: #ff8528

    .ace_text-layer .ace_constant, .ace_text-layer .ace_constant.ace_numeric
      color: #ff8528

    .ace_text-layer .ace_keyword
      color: #7aa3ff

    .ace_text-layer .ace_variable
      // https://github.com/codecombat/codecombat/issues/6
      color: rgb(145, 48, 50)

    .ace_text-layer .ace_invisible_space
      visibility: hidden

    .ace_search
      background-color: rgba(216, 187, 165, 1)
      border: 0
      @include box-shadow(1px 2px 1px #444)
      
      .ace_search_field
        width: 190px

      .ace_searchbtn, .ace_replacebtn
        padding: 0px 4px

.ace_autocomplete .ace_line:not(.ace_selected) .ace_completion-meta
  // Don't show "press enter" on lines that aren't currently selected
  display: none

html.no-borderimage
  #spell-view
    span.code-background
      display: none
    img.code-background
      display: block
